#include <stdlib.h>
#include <stdio.h>
#include <math.h>
#include <string.h>
#include "type.h"

void GenerateProblem_001()
{
    Arm=(float *)malloc(sizeof(int)*K);
	int k;
    //float x=(1-0.7)/(K);
    float x=(0.9444)/(K);
    float y=x;
	for (k=0;k<K;k++) {
        //if(k>=4)
		Arm[k]=y;
		y=y+x;
        printf("k=%d mu=%f\n",k,Arm[k]);
	}

}

void GenerateProblem_10()
// K bras Bernouilli avec proba différentes
{
	Arm=(float *)malloc(sizeof(int)*K);
	int k;

	for (k=0;k<K;k++) {

        Arm[4]=0.1;
        Arm[8]=0.9;
        Arm[1]=0.1;
        Arm[2]=0.1;
        Arm[3]=0.1;
        Arm[5]=0.1;
        Arm[6]=0.9;
        Arm[7]=0.9;
        Arm[0]=0.1;
        Arm[9]=0.9;
        /*printf("hii\n");*/
        printf("k=%d mu=%f\n",k,Arm[k]);

	}

}

void GenerateProblem_0()
// K bras Bernouilli avec proba différentes
{
	Arm=(float *)malloc(sizeof(int)*K);
	int k;

	for (k=0;k<K;k++) {
		if (k < (int)(K*0.1)) Arm[k]=0.7;
		if (k >= (int)(K*0.1)) Arm[k]=0.1;
		printf("k=%d mu=%f\n",k,Arm[k]);

	}

}

void GenerateProblem_01()
// K bras Bernouilli avec proba différentes
{
	Arm=(float *)malloc(sizeof(int)*K);
	int k;

	for (k=0;k<K;k++) {
		if (k < (int)(K*0.1)) Arm[k]=0.15;
		if (k >= (int)(K*0.1)) Arm[k]=0.1;
		printf("k=%d mu=%f\n",k,Arm[k]);

	}

}


void GenerateProblem_1()
// K bras Bernouilli avec proba différentes
{
	Arm=(float *)malloc(sizeof(int)*K);
	int k;

	for (k=0;k<K;k++) {
		Arm[k]=0.6/(1-K)*(k+1) - 0.6/(1-K) +0.7;
		printf("k=%d mu=%f\n",k,Arm[k]);
	}

}

void GenerateProblem_11()
// joint  channel selection and power control
{

	Arm=(float *)malloc(sizeof(int)*K);
	int k;

	for (k=0;k<K;k++) {
		if (k < (int)(K*0.1)) Arm[k]=0.7;
		if (k >= (int)(K*0.1) && k < (int)(K*0.2)) Arm[k]=0.5;
		if (k >= (int)(K*0.2) && k < (int)(K*0.3)) Arm[k]=0.3;
		if (k >= (int)(K*0.3)) Arm[k]=0.1;
		printf("k=%d mu=%f\n",k,Arm[k]);

	}

}



float GetReward(int k, int p, int i )
// retourne la récompense du bras k
{
    int n;
    randX=RAND_R(1.0);
	//X[i]=X[i]+randX;

	if(randX<Xmin)Xmin=randX;
	if(randX>Xmax)Xmax=randX;

    for (n=0; n<N; n++)
    {
        if ( Player[n].k ==k && n!=p && Player[n].k!=-1)
        {

            collisions[i]=collisions[i]+1;
            col_arm[i][k]=col_arm[i][k]+1.0;
            coll[p][k]++;
            return 0.0;}
    }

	if (randX <= Arm[k]) {return 1.0;}

	else {loss[i]++;los_arm[i][k]=los_arm[i][k]+1.0;
	return 0.0;}
}



