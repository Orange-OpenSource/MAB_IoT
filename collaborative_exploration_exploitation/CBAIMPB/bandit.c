
#include <stdlib.h>
#include <stdio.h>
#include <math.h>
#include <string.h>
#include "type.h"

/**generating the mean rewards of the arms*/
void GenerateProblem_001()
{
    Arm=(float *)malloc(sizeof(int)*K);
	int k;
    float x=(0.95-0.1)/(K-1);
    float y=x;
	for (k=0;k<K;k++) {
		Arm[k]=y;
		y=y+x;
        printf("k=%d mu=%f\n",k,Arm[k]);
	}
}
void GenerateProblem_10()
// K bras Bernouilli avec proba différentes
{
	Arm=(float *)malloc(sizeof(int)*K);
	int k;

	for (k=0;k<K;k++) {

        Arm[4]=0.1;
        Arm[8]=0.9;
        Arm[1]=0.1;
        Arm[2]=0.1;
        Arm[3]=0.1;
        Arm[5]=0.1;
        Arm[6]=0.9;
        Arm[7]=0.9;
        Arm[0]=0.1;
        Arm[9]=0.9;
        /*printf("hii\n");*/
        printf("k=%d mu=%f\n",k,Arm[k]);

	}

}

void GenerateProblem_0()
// K bras Bernouilli avec proba différentes
{
	Arm=(float *)malloc(sizeof(int)*K);
	int k;

	for (k=0;k<K;k++) {
		if (k < (int)(K*0.1)) Arm[k]=0.7;
		if (k >= (int)(K*0.1)) Arm[k]=0.1;
		printf("k=%d mu=%f\n",k,Arm[k]);

	}

}

void GenerateProblem_01()
// K bras Bernouilli avec proba différentes
{
	Arm=(float *)malloc(sizeof(int)*K);
	int k;

	for (k=0;k<K;k++) {
		if (k < (int)(K*0.1)) Arm[k]=0.15;
		if (k >= (int)(K*0.1)) Arm[k]=0.1;
		printf("k=%d mu=%f\n",k,Arm[k]);

	}

}


void GenerateProblem_1()
// K bras Bernouilli avec proba différentes
{
	Arm=(float *)malloc(sizeof(int)*K);
	int k;

	for (k=0;k<K;k++) {
		Arm[k]=0.6/(1-K)*(k+1) - 0.6/(1-K) +0.7;
		printf("k=%d mu=%f\n",k,Arm[k]);
	}

}

void GenerateProblem_11()
// joint  channel selection and power control
{
    // matrix of channel gain
    float gain[2][8] = {{0.5,0.8,0.15,0.2,0.01,0.05,0.01,0.09},{0.02,0.05,0.02,0.06,0.05,0.15,0.75,0.95}};
    int power[2]={1,5};
    K=4;


	Arm=(float *)malloc(sizeof(int)*K);
	int k;

	for (k=0;k<K;k++) {
		if (k < (int)(K*0.1)) Arm[k]=0.7;
		if (k >= (int)(K*0.1) && k < (int)(K*0.2)) Arm[k]=0.5;
		if (k >= (int)(K*0.2) && k < (int)(K*0.3)) Arm[k]=0.3;
		if (k >= (int)(K*0.3)) Arm[k]=0.1;
		printf("k=%d mu=%f\n",k,Arm[k]);

	}

}


float GetReward(int k, int p, int i )
// retourne la récompense du bras k
{
    int n;
    for (n=0; n<N; n++)
    {
        if ( Player[n].k ==k && n!=p)
        {//printf("yes \n");
            collisions[i]++;
            return 0.0;}
    }

	float x=RAND_R(1.0);
	//printf("x is %f \n", x);
	if (x < Arm[k]) return 1.0;
	else {loss[i]++;return 0.0;}
}


